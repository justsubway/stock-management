
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            color: white;
        }

        #stock {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px;
            background-color: #333;
            color: white;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #444;
        }

        th, td {
            padding: 10px;
            border: 1px solid #777;
            color: white;
        }

        h3 {
            margin-top: 0;
        }
    </style>
</head>
<body>

<div id="stock">
    <h3>Stock:</h3>
    <!-- Stock display will be dynamically updated here -->
</div>

<div>
    <h3>Add an Order:</h3>
    <form onsubmit="submitOrder(); return false;">
        <label for="color">Color:</label>
        <select id="color">
            <option value="pink">Pink</option>
            <option value="black">Black</option>
            <option value="blue">Blue</option>
        </select><br><br>

        <label for="size">Size:</label>
        <select id="size">
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
        </select><br><br>
        <label for="status">Status:</label>
        <select id="status">
            <option value="paid">Paid</option>
            <option value="not_paid">Not Paid</option>
            <option value="wants">Wants</option>
        </select><br><br>
        <label for="notes">Notes:</label>
        <input type="text" id="notes" placeholder="Optional notes..."><br><br>


        <label for="customerName">Customer Name:</label>
        <input type="text" id="customerName" required><br><br>

        <button type="submit">Add Order</button>
    </form>
</div>

<table id="orderTable">
    <tr>
        <th>Customer Name</th>
        <th>Status</th>
        <th>Color</th>
        <th>Size</th>
        <th>Notes</th>
        <th>Actions</th>
    </tr>
    <!-- Orders will be dynamically added here -->
</table>



<script>
    let orders = [];

    function updateOrderDisplay() {
        let orderTable = document.getElementById('orderTable');
        orderTable.innerHTML = '<tr><th>Customer Name</th><th>Status</th><th>Color</th><th>Size</th><th>Notes</th><th>Actions</th></tr>';
        orders.forEach((order, index) => {
            let displayNotes = order.notes ? order.notes : "None";  // Replace undefined or empty notes with "None"
            orderTable.innerHTML += `
            <tr>
                <td>${order.customerName}</td>
                <td>${order.status}</td>
                <td>${order.color}</td>
                <td>${order.size}</td>
                <td>${displayNotes}</td>
                <td>
                    <button onclick="deleteOrder(${index})">Delete</button>
                </td>
            </tr>
        `;
        });
    }


    function submitOrder() {
        let color = document.getElementById('color').value;
        let size = document.getElementById('size').value;
        let customerName = document.getElementById('customerName').value;
        let status = document.getElementById('status').value;
        let notes = document.getElementById('notes').value || "None";  // Default to "None" if no notes

        if (customerName && status) {
            if (addOrder(color, size)) {  // Only proceed if stock is available
                orders.push({ customerName, status, color, size, notes });
                updateOrderDisplay();  // Update the order display
                saveOrders();  // Save the orders to localStorage
            }
        } else {
            alert('Please enter a customer name and select a valid status.');
        }
    }


    // Sample stock for each color and size
    let stock = {
        pink: { S: 55, M: 105, L: 85, XL: 65 },
        black: { S: 45, M: 95, L: 75, XL: 55 },
        blue: { S: 65, M: 105, L: 55, XL: 45 }
    };

    // Load stock from localStorage if available
    function loadStock() {
        let savedStock = localStorage.getItem('shirtStock');
        if (savedStock) {
            stock = JSON.parse(savedStock);
        }
        updateStockDisplay();
    }

    // Save stock to localStorage
    function saveStock() {
        localStorage.setItem('shirtStock', JSON.stringify(stock));
    }

    // Update stock display dynamically
    function updateStockDisplay() {
        let stockDisplay = document.getElementById('stock');
        stockDisplay.innerHTML = `
                <h3>Stock:</h3>
                Pink Shirts: Small (${stock.pink.S}), Medium (${stock.pink.M}), Large (${stock.pink.L}), XL (${stock.pink.XL})<br>
                Black Shirts: Small (${stock.black.S}), Medium (${stock.black.M}), Large (${stock.black.L}), XL (${stock.black.XL})<br>
                Blue Shirts: Small (${stock.blue.S}), Medium (${stock.blue.M}), Large (${stock.blue.L}), XL (${stock.blue.XL})
            `;
    }

    // Function to add a new order and update the stock
    function addOrder(color, size) {
        if (stock[color] && stock[color][size] > 0) {
            stock[color][size]--;  // Decrease stock count
            updateStockDisplay();  // Update the stock display
            saveStock();  // Save the updated stock to localStorage
            return true;  // Return true indicating successful stock reduction
        } else {
            alert(`No stock available for ${color} shirt in size ${size}.`);  // Alert if insufficient stock
            return false;  // Return false indicating failure
        }
    }




    // Load orders from localStorage
    function loadOrders() {
        let savedOrders = localStorage.getItem('orders');
        if (savedOrders) {
            orders = JSON.parse(savedOrders);  // Parse the saved orders
            updateOrderDisplay();  // Update the display with the loaded orders
        }
    }



    // Save orders to localStorage
    function saveOrders() {
        localStorage.setItem('orders', JSON.stringify(orders));  // Save orders array to localStorage
    }



    // Call loadOrders when the page loads
    window.onload = function() {
        loadStock();  // Load stock
        loadOrders(); // Load orders
    };


    function deleteOrder(index) {
        if (confirm("Are you sure you want to delete this order?")) {
            orders.splice(index, 1); // Remove order from array
            updateOrderDisplay(); // Update the UI
            saveOrders(); // Save updated orders to localStorage
        }
    }
</script>

</body>
</html>
